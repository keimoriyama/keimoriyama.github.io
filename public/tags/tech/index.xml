<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tech on K&#39;s blog</title>
    <link>http://localhost:1313/tags/tech/</link>
    <description>Recent content in Tech on K&#39;s blog</description>
    <generator>Hugo</generator>
    <language>jp-JP</language>
    <lastBuildDate>Thu, 09 Oct 2025 19:59:26 +0900</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/tech/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Emacsでlua-language-serverを動かす</title>
      <link>http://localhost:1313/post/tech/20251008094413-emacs%E3%81%A7lua_language_server%E3%82%92%E5%8B%95%E3%81%8B%E3%81%99/</link>
      <pubDate>Wed, 08 Oct 2025 00:00:00 +0900</pubDate>
      <guid>http://localhost:1313/post/tech/20251008094413-emacs%E3%81%A7lua_language_server%E3%82%92%E5%8B%95%E3%81%8B%E3%81%99/</guid>
      <description>&lt;p&gt;Emacsのlsp-modeでlua-language-serverを動かそうとしたら、ハマったのでメモ。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://zenn.dev/mozumasu/articles/mozumasu-wezterm-customization&#34;&gt;モテるターミナルにカスタマイズしよう（WezTerm）&lt;/a&gt;を見て、weztermを設定しようとした。&lt;/p&gt;&#xA;&lt;p&gt;設定ファイルである &lt;code&gt;wezterm.lua&lt;/code&gt; をEmacsで編集するためにluaの環境を整えようとしたら、Lua-language-serverを &lt;code&gt;lsp-mode&lt;/code&gt; が認識しなかった。&lt;/p&gt;&#xA;&lt;p&gt;加えて、自動でインストールしようとしたら、emacsがフリーズしてしまった。&lt;/p&gt;&#xA;&lt;p&gt;動作させるために必要だった設定は以下の通り。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-emacs-lisp&#34; data-lang=&#34;emacs-lisp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;setq&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;lsp-clients-lua-language-server-bin&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;format&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s/.nix-profile/bin/lua-language-server&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;getenv&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nv&#34;&gt;lsp-clients-lua-language-server-main-location&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;format&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s/.lua-language-server/main.lua&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;getenv&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;; reference : https://github.com/emacs-lsp/lsp-mode/issues/4688#issuecomment-3138937688&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;defun&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;my/lsp-clients-lua-language-server-test&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s&#34;&gt;&amp;#34;(Improved) Test Lua language server binaries and files.&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;f-exists?&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;lsp-clients-lua-language-server-main-location&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;f-exists?&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;lsp-clients-lua-language-server-bin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;f-exists?&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;car&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;split-string&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;lsp-clients-lua-language-server-command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))))&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;advice-add&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;#&amp;#39;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;lsp-clients-lua-language-server-test&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nb&#34;&gt;:override&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;#&amp;#39;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;my/lsp-clients-lua-language-server-test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;lsp-mode自体にもIssueが上っていたためそれを参考にして設定したら動作した。&lt;/p&gt;&#xA;&lt;p&gt;私はnixを使用してlua-language-serverをインストールしている。&#xA;インストールする時に、lua-language-serverの &lt;code&gt;main.lua&lt;/code&gt; を適当な場所に配置する。&lt;/p&gt;&#xA;&lt;p&gt;この &lt;code&gt;main.lua&lt;/code&gt; の場所を &lt;code&gt;lsp-clients-lua-language-server-main-location&lt;/code&gt; に設定し、 &lt;code&gt;lsp-clients-lua-language-server-bin&lt;/code&gt; にlua-language-serverをインストールしたPathを設定する。&lt;/p&gt;&#xA;&lt;p&gt;最後に、&lt;a href=&#34;https://github.com/emacs-lsp/lsp-mode/issues/4688#issuecomment-3138937688&#34;&gt;このIssueコメント&lt;/a&gt;にある関数をコピペしたら動いた。&lt;/p&gt;&#xA;&lt;p&gt;参考 : &lt;a href=&#34;https://github.com/emacs-lsp/lsp-mode/issues/4688&#34;&gt;Externally provided lua-language-server is not recognized #4688&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>HugoのGithub Styleに自作のメニューを付ける</title>
      <link>http://localhost:1313/post/tech/20251007164516-hugo%E3%81%AEgithub_style%E3%81%AB%E7%8B%AC%E8%87%AA%E3%81%AE%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%92%E4%BB%98%E3%81%91%E3%82%8B/</link>
      <pubDate>Tue, 07 Oct 2025 00:00:00 +0900</pubDate>
      <guid>http://localhost:1313/post/tech/20251007164516-hugo%E3%81%AEgithub_style%E3%81%AB%E7%8B%AC%E8%87%AA%E3%81%AE%E3%83%A1%E3%83%8B%E3%83%A5%E3%83%BC%E3%82%92%E4%BB%98%E3%81%91%E3%82%8B/</guid>
      <description>&lt;p&gt;このブログは&lt;a href=&#34;https://gohugo.io&#34;&gt;Hugo&lt;/a&gt;の&lt;a href=&#34;https://themes.gohugo.io/themes/github-style/&#34;&gt;Github Style&lt;/a&gt;を少し設定している。&lt;/p&gt;&#xA;&lt;p&gt;デフォルトだと、自己紹介などがブログに埋もれてしまうためメニューバーに追加した。&lt;/p&gt;&#xA;&lt;p&gt;現状、一つ加える度にhtmlを触らないといけない実装になっているのが気になるが、動いているからヨシ!&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;config.toml&lt;/code&gt; に以下の要素を追加して、設定ファイルに追記すれば要素が追加されるようにした。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Self&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;introduction/introduction&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;そして、作成したHugoプロジェクト以下に &lt;code&gt;layouts/partial/menu.html&lt;/code&gt; を作る。&lt;/p&gt;&#xA;&lt;p&gt;&lt;code&gt;menus.html&lt;/code&gt; の追加のメニューとして以下の変更を加えた。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{{ range .Site.Params.projects }}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;UnderlineNav-item&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;          {{ if .IsSection }}  selected  {{ end }}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;          {{ if eq .Type &amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;}}&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;selected&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;{{&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;}}&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;na&#34;&gt;href&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;{{ absURL .url }}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  {{ .name}}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{{ end }}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;既存の実装では、リンクを貼る実装が &lt;code&gt;{{urls.JoinPath .Site.BaseURL url}}&lt;/code&gt; になってる。&lt;/p&gt;&#xA;&lt;p&gt;だが、上手く動作してくれなかったので &lt;code&gt;{{absURL .url}}&lt;/code&gt; という実装にしている。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
